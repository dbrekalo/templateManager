!function(t,f){function a(n,a,i){var o=d+n+u,f=function(){a&&a(e[n].template)};if(e[n])return"resolved"===e[n].deffered.state()?f():t.when(e[n].deffered).done(function(){f()}),e[n].deffered;if("script"===i)return e[n]={template:r(t("#"+n).html()),deffered:!0},f(),e[n].deffered;var s=t.ajax({url:o,method:"GET",async:!i,cache:c,success:function(t){e[n].template=r(t),f()}});return e[n]={deffered:s},e[n].deffered}var e={},d="/",u=".jst",r=f._&&f._.template,c=!1,n={setBasePath:function(e){return d=e,n},setTemplateEngine:function(e){return r=e,n},setAjaxCache:function(e){return c=e,n},cacheScriptTemplates:function(f,a){return t(f).each(function(){var n=t(this);e[n.data(a)]={template:r(n.html()),deffered:!0}}),n},register:function(t,r){return e[t]={template:r,deffered:!0},n}};t.extend(a,n),t.wk=t.wk||{},t.wk.getTemplate=a}(jQuery,window);